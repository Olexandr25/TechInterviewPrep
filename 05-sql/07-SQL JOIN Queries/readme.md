# SQL JOIN Queries

**SQL JOIN** — це операції, які дозволяють об'єднувати рядки з двох або більше таблиць на основі пов'язаних між ними стовпців. JOIN-и є фундаментальними для роботи з реляційними базами даних, оскільки дозволяють отримувати дані з кількох таблиць в одному запиті, будувати зв'язки та виконувати складний аналіз.

---

## Основні типи JOIN

### INNER JOIN

Повертає лише ті рядки, для яких є співпадіння у обох таблицях.

```sql
SELECT a.*, b.*
FROM table_a a
INNER JOIN table_b b ON a.id = b.a_id;
```

- За замовчуванням JOIN = INNER JOIN.
- Якщо немає співпадіння — рядок не потрапляє у результат.

---

### LEFT JOIN (LEFT OUTER JOIN)

Повертає всі рядки з лівої таблиці + співпадіння з правої (або NULL, якщо співпадіння немає).

```sql
SELECT a.*, b.*
FROM table_a a
LEFT JOIN table_b b ON a.id = b.a_id;
```

- Корисно для пошуку "відсутніх" зв'язків.

---

### RIGHT JOIN (RIGHT OUTER JOIN)

Повертає всі рядки з правої таблиці + співпадіння з лівої (або NULL, якщо співпадіння немає).

```sql
SELECT a.*, b.*
FROM table_a a
RIGHT JOIN table_b b ON a.id = b.a_id;
```

- Застосовується рідше, але корисно, якщо потрібно всі записи з правої таблиці.

---

### FULL OUTER JOIN

Повертає всі рядки з обох таблиць: співпадіння — об'єднані, відсутні — з NULL.

```sql
SELECT a.*, b.*
FROM table_a a
FULL OUTER JOIN table_b b ON a.id = b.a_id;
```

- Дозволяє побачити всі дані з обох таблиць, навіть якщо немає співпадіння.

---

### SELF JOIN

Об'єднання таблиці із самою собою. Використовується для порівняння рядків у межах однієї таблиці.

```sql
SELECT a.name AS employee, b.name AS manager
FROM employees a
JOIN employees b ON a.manager_id = b.id;
```

- Обов'язково використовувати псевдоніми (alias).

---

### CROSS JOIN

Повертає декартовий добуток: кожен рядок першої таблиці з'єднується з кожним рядком другої.

```sql
SELECT a.*, b.*
FROM table_a a
CROSS JOIN table_b b;
```

- Використовуйте обережно: кількість рядків = n * m.

---

## Interview Questions

- Які типи JOIN існують у SQL? Наведіть приклади.
- Чим відрізняється INNER JOIN від LEFT JOIN?
- Для чого потрібен FULL OUTER JOIN?
- Як працює SELF JOIN і для чого він використовується?
- Що таке CROSS JOIN і коли його варто застосовувати?
- Як знайти всі записи з однієї таблиці, для яких немає співпадінь у іншій?
- Як поєднувати JOIN з агрегатними функціями?

---

## What to Answer

- **Основні типи JOIN у SQL:**
  - `INNER JOIN` — повертає лише ті рядки, для яких є співпадіння у обох таблицях.

    ```sql
    SELECT a.*, b.*
    FROM table_a a
    INNER JOIN table_b b ON a.id = b.a_id;
    ```

  - `LEFT JOIN` — повертає всі рядки з лівої таблиці та співпадіння з правої (або NULL, якщо співпадіння немає).

    ```sql
    SELECT a.*, b.*
    FROM table_a a
    LEFT JOIN table_b b ON a.id = b.a_id;
    ```

  - `RIGHT JOIN` — повертає всі рядки з правої таблиці та співпадіння з лівої (або NULL, якщо співпадіння немає).

    ```sql
    SELECT a.*, b.*
    FROM table_a a
    RIGHT JOIN table_b b ON a.id = b.a_id;
    ```

  - `FULL OUTER JOIN` — повертає всі рядки з обох таблиць, співпадіння — об'єднані, відсутні — з NULL.

    ```sql
    SELECT a.*, b.*
    FROM table_a a
    FULL OUTER JOIN table_b b ON a.id = b.a_id;
    ```

  - `SELF JOIN` — об'єднання таблиці із самою собою, використовується для порівняння рядків у межах однієї таблиці (наприклад, ієрархії).

    ```sql
    SELECT a.name AS employee, b.name AS manager
    FROM employees a
    JOIN employees b ON a.manager_id = b.id;
    ```

  - `CROSS JOIN` — повертає декартовий добуток: кожен рядок першої таблиці з'єднується з кожним рядком другої.

    ```sql
    SELECT a.*, b.*
    FROM table_a a
    CROSS JOIN table_b b;
    ```

- **Чим відрізняється INNER JOIN від LEFT JOIN?**
  - `INNER JOIN` повертає лише ті рядки, які мають співпадіння у обох таблицях.
  - `LEFT JOIN` повертає всі рядки з лівої таблиці, навіть якщо немає співпадіння у правій (у такому разі у правих стовпцях буде NULL).

- **Для чого потрібен FULL OUTER JOIN?**
  - Щоб отримати всі рядки з обох таблиць: співпадіння — об'єднані, відсутні — з NULL. Це корисно для аналізу повноти даних, пошуку "осиротілих" записів у будь-якій таблиці.

- **Як працює SELF JOIN і для чого він використовується?**
  - SELF JOIN — це JOIN таблиці із самою собою. Використовується для порівняння рядків у межах однієї таблиці, наприклад, для побудови ієрархій (співробітник — менеджер), пошуку пар, аналізу зв'язків усередині таблиці.

- **Що таке CROSS JOIN і коли його варто застосовувати?**
  - CROSS JOIN повертає декартовий добуток: кожен рядок першої таблиці поєднується з кожним рядком другої. Застосовується рідко, наприклад, для генерації всіх можливих комбінацій значень або тестових даних.

- **Як знайти всі записи з однієї таблиці, для яких немає співпадінь у іншій?**
  - Використовуйте LEFT JOIN і перевірку на NULL у правій таблиці:

    ```sql
    SELECT a.*
    FROM table_a a
    LEFT JOIN table_b b ON a.id = b.a_id
    WHERE b.a_id IS NULL;
    ```

  - Це дозволяє знайти "осиротілі" записи з лівої таблиці.

- **Як поєднувати JOIN з агрегатними функціями?**
  - JOIN-и можна комбінувати з агрегатними функціями (`COUNT`, `SUM`, `AVG` тощо) для аналізу пов'язаних даних. Наприклад, підрахувати кількість замовлень для кожного клієнта:

    ```sql
    SELECT c.name, COUNT(o.id) AS order_count
    FROM customers c
    LEFT JOIN orders o ON c.id = o.customer_id
    GROUP BY c.name;
    ```

  - Це дозволяє отримати статистику по зв'язаних таблицях.
