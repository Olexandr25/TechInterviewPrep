# Transactions

**Transactions** в SQL — це одиниці роботи, які групують одну або кілька операцій у базі даних в єдиний атомарний блок. Вони гарантують цілісність даних завдяки дотриманню властивостей ACID:

- **Atomicity** (атомарність) — або всі зміни виконуються, або жодна;
- **Consistency** (узгодженість) — база переходить лише у валідний стан;
- **Isolation** (ізольованість) — транзакції не впливають одна на одну;
- **Durability** (стійкість) — підтверджені зміни зберігаються навіть після збоїв.

---

## Основні команди для роботи з транзакціями

- **BEGIN** — початок транзакції.

  ```sql
  BEGIN;
  -- SQL-операції
  ```

- **COMMIT** — зберігає всі зміни, зроблені у транзакції, і завершує її.

  ```sql
  COMMIT;
  ```

  - Після COMMIT зміни стають постійними і не можуть бути скасовані.

- **ROLLBACK** — скасовує всі зміни, зроблені у поточній транзакції, повертаючи базу до початкового стану.

  ```sql
  ROLLBACK;
  ```

  - Використовується при помилках або якщо потрібно відмінити операції.

- **SAVEPOINT** — створює проміжну точку всередині транзакції, до якої можна повернутись за допомогою ROLLBACK.

  ```sql
  SAVEPOINT sp1;
  -- SQL-операції
  ROLLBACK TO sp1;
  ```

  - Дозволяє частково відкотити транзакцію.

---

## ACID-властивості

- **Atomicity** — всі операції виконуються як одне ціле.
- **Consistency** — транзакція переводить базу з одного валідного стану в інший.
- **Isolation** — паралельні транзакції не впливають одна на одну.
- **Durability** — після COMMIT зміни не втрачаються навіть при збоях.

---

## Рівні ізоляції транзакцій

- **Read Uncommitted** — бачить навіть незавершені зміни інших транзакцій (найнижчий рівень, можливі "брудні" читання).
- **Read Committed** — бачить лише підтверджені зміни (запобігає "брудним" читанням).
- **Repeatable Read** — гарантує, що дані не зміняться протягом транзакції (запобігає "неповторюваним" читанням).
- **Serializable** — найвищий рівень, повна ізоляція (імітує послідовне виконання транзакцій).

---

## Interview Questions

- Що таке транзакція у SQL? Для чого вона потрібна?
- Які основні властивості ACID?
- Як почати, підтвердити або відкотити транзакцію?
- Для чого потрібен SAVEPOINT?
- Які існують рівні ізоляції транзакцій?
- Як транзакції забезпечують цілісність даних при паралельній роботі?

---

## What to Answer

- Транзакція — це група SQL-операцій, які виконуються як єдине ціле.
- Основні команди: `BEGIN`, `COMMIT`, `ROLLBACK`, `SAVEPOINT`.
- ACID: атомарність, узгодженість, ізольованість, стійкість.
- SAVEPOINT дозволяє частково відкотити транзакцію.
- Рівні ізоляції: Read Uncommitted, Read Committed, Repeatable Read, Serializable.
- Транзакції потрібні для збереження цілісності даних, особливо при помилках або паралельній роботі користувачів.
